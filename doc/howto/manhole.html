<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Manhole, The Twisted Interaction Client</title>
  </head>

  <body>
    <h1>Manhole, The Twisted Interaction Client</h1>

    <p>Manhole is a client that you can use to connect to the
    twisted.manhole service. It lets you execute arbitrary code on
    the server, thus it is a great administration and debugging
    tool.</p>

    <h2>Starting the twisted.manhole service</h2>

    <p>Execute the command <code class="shell">mktap manhole -u
    [username] -w [password]</code>. This will create a twisted
    application (.tap) file that has a <code
    class="API">twisted.manhole</code> service which will listen on
    port 8787. Execute the command 'twistd -f manhole.tap' to
    actually start the server.</p>

    <h2>Using manhole</h2>

    <p>You can execute the command <code
    class="shell">manhole</code> to start the GTK+ manhole client.
    This will give you a window asking for your username, password,
    hostname, service, perspective, and port #. Type in the
    username and password you selected above, the hostname that the
    twisted.manhole service was started on (localhost is the
    default), leave the Service the same ('twisted.manhole'), leave
    Perspective blank, and leave Port # as the default of 8787.
    Click the "Log In" button and you will be greeted with a short
    message in a window with an output area and an input area. You
    can type arbitrary python code into the input area and get the
    results in the output area.</p>

    <h2>Special Commands</h2>

    <p>There are a few special commands so far that make debugging
    Twisted objects really nice. These are <code>/browse</code> and
    <code>/watch</code>. You can <code>/browse</code> any type of
    object, and it will give you some nice information about that
    object. <code>/watch</code>-ing an object adds hooks to the
    object, allowing you to watch modifications to it in real time.
    For example:</p>
<pre class="python-interpreter">
/browse ["hello", "there"]
 <font
color="blue">&lt;ObjectLink of ["hello", "there"] type list&gt;:
  ['hello',
   'there',]
</font>

class A:
    def foo(self):
        self.x = 1
x = A()
/browse x
<font color="blue">&lt;ObjectLink of x type instance&gt;:
  {members: {}
   class: 'A'
   methods: {}}
</font>

/watch x
 <font color="blue"> &lt;ObjectLink of x type instance&gt;:
  {members: {}
   class: 'A'
   methods: {}}
</font>

x.foo()

<font color="blue">&lt;ObjectLink of x type instance&gt;:
  {members: {x: 1}
   class: 'twisted.python.explorer.WatchingA8195574'
   methods:
     {foo:
        &lt;ObjectLink of x.foo type instance_method&gt;:
          {class: 'twisted.python.explorer.WatchingA8195574'
           self: '&lt;twisted.python.explorer.WatchingA8195574 instance at 0x8195574&gt;'
           doc:
             Pretend to be the method I replaced, and ring the bell.
                     
           line: 651
           signature:
             [{name: instance},
              {name: a
               list: 1},
              {name: kw
               keywords: 1},]
           file: /home/punck/cvs/Twisted/twisted/python/explorer.py
           name: __call__}
        }}

&lt;ObjectLink of x type instance&gt;:
  {members: {x: 1}
   class: 'twisted.python.explorer.WatchingA8195574'
   methods:
     {foo:
        &lt;ObjectLink of x.foo type instance_method&gt;:
          {class: 'twisted.python.explorer.WatchingA8195574'
           self: '&lt;twisted.python.explorer.WatchingA8195574 instance at 0x8195574&gt;'
           doc:
             Pretend to be the method I replaced, and ring the bell.
                     
           line: 651
           signature:
             [{name: instance},
              {name: a
               list: 1},
              {name: kw
               keywords: 1},]
           file: /home/punck/cvs/Twisted/twisted/python/explorer.py
           name: __call__}
        }}
</font>
   
</pre>

    <p>As you can see, <code>/watch</code> really gives you a lot
    of power (and a lot of output, too -- hopefully we'll have a
    nice GUI display for this in the future). The
    <code>/browse</code> and <code>/watch</code> functionality is
    brought to you by the <code
    class="API">twisted.python.explorer</code> module, which was
    written largely by Kevin Turner.</p>
    <hr />

    <address>
      <a href="mailto:carmstro@twistedmatrix.com">Chris
      Armstrong</a>
    </address>
    <!-- hhmts start -->
    Last modified: Tue Mar 12 22:32:48 EST 2002 <!-- hhmts end -->
  </body>
</html>

