<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>DirDBM: Directory-based Storage</title>
  </head>

  <body>
<h1>DirDBM: Directory-based Storage</h1>

<p><code class="API">twisted.persisted.dirdbm.DirDBM</code> is a DBM-like storage system. 
That is, it stores mappings between keys
and values, like a Python dictionary, except that it stores the values in files
in a directory - each entry is a different file. The keys must always be strings,
as are the values. Other than that, <code class="API" base="twisted.persisted.dirdbm">DirDBM</code>
objects act just like Python dictionaries.</p>

<p><code class="API" base="twisted.persisted.dirdbm">DirDBM</code> is useful for cases
when you want to store small amounts of data in an organized fashion, without having
to deal with the complexity of a RDBMS or other sophisticated database. It is simple,
easy to use, cross-platform, and doesn't require any external C libraries, unlike
Python's built-in DBM modules.</p>

<pre class="python-interpreter">
&gt;&gt;&gt; from twisted.persisted import dirdbm
&gt;&gt;&gt; d = dirdbm.DirDBM("/tmp/dir")
&gt;&gt;&gt; d["librarian"] = "ook"
&gt;&gt;&gt; d["librarian"]        
'ook'
&gt;&gt;&gt; d.keys()
['librarian']
&gt;&gt;&gt; del d["librarian"]
&gt;&gt;&gt; d.items()
[]
</pre>

<p>In certain cases you may want to store Python objects as values. In these cases
you can use <code class="API">twisted.persisted.dirdbm.Shelf</code>. The only
caveat is that you have to make sure to store instances you changed back in
the <code class="API" base="twisted.persisted.dirdbm">Shelf</code> or changes
won't be saved.</p>

<pre class="python-interpreter">
&gt;&gt;&gt; from twisted.persisted import dirdbm
&gt;&gt;&gt; d = dirdbm.Shelf("/tmp/dir2")
&gt;&gt;&gt; d["key"] = [1, 2]
&gt;&gt;&gt; d["key"]
[1, 2]
&gt;&gt;&gt; l = d["key"]
&gt;&gt;&gt; l.append(3)
&gt;&gt;&gt; d["key"]
[1, 2]
&gt;&gt;&gt; d["key"] = l
&gt;&gt;&gt; d["key"]
[1, 2, 3]
</pre>

  </body>
</html>
